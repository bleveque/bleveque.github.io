{"version":3,"sources":["StringRenderer.js","metadataParser.js","constants.js","components/StringRenderArea.js","asciiArt.js","pageDataGenerators/home.js","pageDataGenerators/projects.js","ImageConverter.js","components/TV.js","pageDataGenerators/tv.js","pageDataGenerators/work.js","pageDataGenerators/about.js","pageDataGenerators/index.js","pageDataGenerators/nav.js","animationHelper.js","components/HomePage.js","index.js"],"names":["interpolate","a","b","t","StringRenderer","width","height","data","this","content","textMetadata","breakWidth","interval","initialContent","finalContent","length","Array","join","interpolatedArr","maxLength","Math","max","i","String","fromCharCode","round","charCodeAt","chars","len","inputData","relativeY","type","renderText","renderTextrect","renderLine","sort","chunk1","chunk2","start","fillEmptyEntriesAndAddLineBreaks","str","generateRenderData","x","y","out","chunkMetadata","text","isYRelative","parseWidth","parseHeight","initX","chunkStart","Infinity","chunkEnd","maxY","maxWidth","rightMargin","nextNewlineIdx","indexOf","nextSpaceIdx","nextBreakIdx","min","nextBreakX","outIdx","getIdxWithBreaks","props","push","end","dx","dy","floor","isFinite","startHeight","endHeight","startWidth","endWidth","dim","parseFloat","ceil","elements","lastEnd","key","substring","href","contentOffsets","navWidth","topBarHeight","isTouchScreen","navigator","maxTouchPoints","StringRenderArea","singleCharRef","React","createRef","doubleCharRef","singleCharWidth","singleCharHeight","windowCharWidth","windowCharHeight","verticalCharPadding","resizeHandler","stringRenderer","autoResize","resize","bind","window","addEventListener","charHeight","current","getBoundingClientRect","onSetCharDims","removeEventListener","fixedWidthPx","innerWidth","fixedHeightPx","innerHeight","setDimensions","forceUpdate","newData","finalTextMetadata","intermediateContent","interpolateContent","interpolationParameter","metadataParser","interpolateToNewData","setData","render","className","Fragment","ref","childElementDataGenerator","Component","DANCING","left","top","CHAR_GRADIENT","ImageConverter","characterWidth","characterHeight","charWidth","w","h","p","outRgba","inRgba","kernel","kernelWidth","kernelHalfWidth","kernelHalfHeight","rsum","gsum","bsum","xIdx","offset","r","g","kernelIdx","outOffset","fn","idx","forEachPixel","imageData","intensity","grayscaleImage","grayscale","horizConvolved","convolveKernel","vertConvolved","finalIntensity","sqrt","pow","invert","val","linearThresh","outCharacterWidth","aspectRatio","outCharacterHeight","rgb","block","imageCharacterWidth","imageCharacterHeight","pxOffset","pyOffset","ctr","py","roundPy","px","roundPx","pixelIndex","reduce","acc","getCharForVal","TV","state","paused","imageConverter","refreshRate","videoRef","canvasRef","frameData","frameConfig","setCharDims","setInterval","shouldRender","clearInterval","getCharWidthTvUnits","getCharHeightTvUnits","video","canvas","context","getContext","videoHeight","videoWidth","drawImage","getImageData","edgeModeOn","edgeDetection","putImageData","asciiImageArray","convert","tvWidthPx","tvHeightPx","setCharDimensions","setState","on","pause","play","getElementsFromVideo","getBlankScreenElements","onClick","controls","src","contentLeft","contentTop","CHANNELS","title","url","tvLeft","tvTop","tvChannelUpLeftOffset","tvOnLeftOffset","flooredLeftOffset","wrappedExplanation","home","stringRenderData","random","projects","tv","tvOn","setTvOn","tvChannel","setTvChannel","tvEdgeModeOn","setTvEdgeModeOn","tvDimMultiplier","setTvDimMultiplier","fontSize","tvNowShowingText","stringRenderChildElementDataGenerator","tvFontSize","style","position","lineHeight","work","about","email","getNavProps","pageName","onNavClick","animationHelper","animationLength","intervalLength","onTick","onDone","timeInInterval","HomePage","pathname","useLocation","pageDataGenerators","hasOwnProperty","useState","setPageName","newPageData","setNewPageData","setInterpolationParameter","pageSpecificState","navRenderData","navDataGenerator","switchPage","newPageName","newStringRenderData","ReactDOM","path","document","getElementById"],"mappings":"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","file":"static/js/main.be21d080.chunk.js","sourcesContent":["// TODO: data format description\n\nconst interpolate = (a, b, t) => {\n  return a * (1 - t) + b * t;\n};\n\n\nclass StringRenderer {\n  constructor(width, height, data) {\n    this.content = '';\n    this.textMetadata = [];\n    this.data = data || [];\n    this.width = width; // character width of render area (probably screen width)\n    this.breakWidth = this.width + 1;\n    this.height = height; // character height of render area (probably screen height)\n    this.interval = null;\n  }\n\n  setData(data) {\n    this.data = data;\n  }\n\n  getContent() {\n    return this.content;\n  }\n\n  setContent(content) {\n    this.content = content;\n  }\n\n  getTextMetadata() {\n    return this.textMetadata;\n  }\n\n  interpolateContent(initialContent, finalContent, t) {\n    if (initialContent.length > finalContent.length) {\n      finalContent += (new Array(initialContent.length - finalContent.length + 1)).join(' ');\n    } else if (finalContent.length > initialContent.length) {\n      initialContent += (new Array(finalContent.length - initialContent.length + 1)).join(' ');\n    }\n    let interpolatedArr = new Array(initialContent.length);\n\n    const maxLength = Math.max(initialContent.length, finalContent.length);\n    for (let i = 0; i < maxLength; i++) {\n      if (i % this.breakWidth === this.breakWidth - 1) {\n        interpolatedArr[i] = '\\n';\n      } else {\n        interpolatedArr[i] = String.fromCharCode(Math.round(interpolate(initialContent[i].charCodeAt(), finalContent[i].charCodeAt(), t)));\n      }\n    }\n\n    return interpolatedArr.join('');\n  }\n\n  fillEmptyEntriesAndAddLineBreaks(chars) {\n    for (let i = 0, len = chars.length; i < len; i++) {\n      chars[i] = chars[i] || '\\u0020';\n      if (i % this.breakWidth === this.breakWidth - 1) chars[i] = '\\n';\n    }\n  }\n\n  generateRenderData(inputData, textMetadata) {\n    let chars = [];\n    let relativeY = 0;\n\n    for (let i = 0; i < inputData.length; i++) {\n      if (!inputData[i]) continue;\n\n      const {type, data} = inputData[i];\n\n      if (type === 'text') {\n        relativeY = this.renderText(chars, textMetadata, data, relativeY);\n      } else if (type === 'textrect') {\n        relativeY = this.renderTextrect(chars, textMetadata, data, relativeY);\n      } else if (type === 'line') {\n        this.renderLine(chars, data);\n      }\n    }\n\n    textMetadata.sort((chunk1, chunk2) => chunk1.start - chunk2.start);\n\n    this.fillEmptyEntriesAndAddLineBreaks(chars);\n\n    return { str: chars.join(''), textMetadata };\n  }\n\n  render() {\n    this.textMetadata.length = 0;\n\n    let { str, textMetadata } = this.generateRenderData(this.data, this.textMetadata);\n\n    this.content = str;\n\n    return { str: this.content, textMetadata: this.textMetadata };\n  }\n\n  getIdxWithBreaks(x, y) {\n    return y * this.breakWidth + x;\n  }\n\n  // if inputData.maxWidth is specified, text will wrap\n  //  if it exceeds the page width. Note that it will not\n  //  push other non-relative text down, so it may cause overlaps\n  renderText(out, chunkMetadata, inputData, relativeY) {\n    let { text, start: [x, y], isYRelative } = inputData;\n    x = this.parseWidth(x);\n    y = this.parseHeight(out, y);\n    if (isYRelative) y += relativeY;\n    if (x < 0) x += this.width;\n\n    const initX = x;\n    let chunkStart = Infinity;\n    let chunkEnd = -Infinity;\n    let maxY = 0;\n\n    for (let i = 0; i < text.length; i++, x++) {\n      if (text[i] === '\\n') {\n        x = initX - 1;\n        y++;\n        continue;\n      }\n\n      if (x < 0) continue;\n      if (x >= this.width && !inputData.maxWidth) continue;\n\n      if (inputData.maxWidth) {\n        const rightMargin = inputData.rightMargin || 0;\n        if (x >= this.width - rightMargin  || x - initX + 1 > inputData.maxWidth) {\n          x = initX;\n          y++;\n          if (text[i] === ' ') i++;\n        } else if (text[i] === ' ') { // break lines on spaces\n          const nextNewlineIdx = text.indexOf('\\n', i + 1);\n          const nextSpaceIdx = text.indexOf(' ', i + 1); // NOTE: current implementation requires a space at the end of wrapped text in order to wrap the last word correctly\n          const nextBreakIdx = (nextNewlineIdx === -1 || nextSpaceIdx === -1) ? Math.max(nextSpaceIdx, nextNewlineIdx) : Math.min(nextSpaceIdx, nextNewlineIdx);\n          const nextBreakX = (nextBreakIdx - i) + x; // (index within text of next break - current index in text) + current x == x of next break\n          if (nextBreakIdx > 0 && (nextBreakX > this.width - rightMargin || nextBreakX - initX + 1 > inputData.maxWidth)) {\n            x = initX;\n            y++;\n            i++;\n          }\n        }\n      }\n      const outIdx = this.getIdxWithBreaks(x, y);\n\n      out[outIdx] = text[i];\n      chunkStart = Math.min(chunkStart, outIdx);\n      chunkEnd = Math.max(chunkEnd, outIdx);\n      maxY = Math.max(maxY, y);\n    }\n    if (chunkMetadata && inputData.props) chunkMetadata.push({ start: chunkStart, end: chunkEnd, inputData });\n    return maxY;\n  }\n\n  // note: inputData reference may be shared by multiple chunkMetadata entries\n  renderTextrect(out, chunkMetadata, inputData, relativeY) {\n    let { text, start: [x, y], width, isYRelative } = inputData;\n    x = this.parseWidth(x);\n    y = this.parseHeight(out, y);\n    if (isYRelative) y += relativeY;\n    if (x < 0) x += this.width;\n\n    let chunkStart = -Infinity;\n    let chunkEnd = -Infinity;\n    let maxY = 0;\n\n    for (let i = 0; i < text.length; i++) {\n      if (x + (i % width) < 0 || x + (i % width) >= this.width) continue;\n      const dx = i % width;\n      const dy = Math.floor(i / width);\n      const outIdx = this.getIdxWithBreaks(x + dx, y + dy);\n      out[outIdx] = text[i];\n      maxY = Math.max(maxY, y + dy);\n\n      if (outIdx > chunkEnd + 1) { // if we've wrapped lines, create new metadata\n        if (isFinite(chunkEnd) && chunkMetadata && inputData.props) {\n          chunkMetadata.push({ start: chunkStart, end: chunkEnd, inputData });\n        }\n        chunkStart = outIdx;\n      }\n      chunkEnd = outIdx;\n    }\n\n    if (isFinite(chunkEnd) && chunkMetadata && inputData.props) chunkMetadata.push({ start: chunkStart, end: chunkEnd, inputData });\n\n    return maxY;\n  }\n\n  renderLine(out, inputData) {\n    const { start, end } = inputData;\n    if (start[0] === end[0] && start[1] === end[1]) { // point\n      const outIdx = this.getIdxWithBreaks(start[0], start[1]);\n      out[outIdx] = '\\u00b7';\n    } else if (start[0] === end[0]) { // vertical\n      const startHeight = this.parseHeight(out, start[1]);\n      const endHeight = this.parseHeight(out, end[1]);\n      for (let i = startHeight; i <= endHeight; i++) {\n        const outIdx = this.getIdxWithBreaks(this.parseWidth(start[0]), i);\n        out[outIdx] = '|';\n      }\n    } else if (start[1] === end[1]) { // horizontal\n      const startWidth = this.parseWidth(start[0]);\n      const endWidth = this.parseWidth(end[0]);\n      for (let i = startWidth; i <= endWidth; i++) {\n        const outIdx = this.getIdxWithBreaks(i, this.parseHeight(out, start[1]));\n        out[outIdx] = '\\u2014';\n      }\n    }\n  }\n\n  parseWidth(dim) {\n    return typeof dim === 'number' ? dim : Math.floor(parseFloat(dim) * this.width / 100);\n  }\n\n  parseHeight(chars, dim) {\n    if (typeof dim === 'number') return dim;\n    const height = Math.max(this.height, Math.ceil(chars.length / this.width));\n    return parseFloat(dim) * height / 100;\n  }\n\n  setDimensions(width, height) {\n    this.width = width;\n    this.breakWidth = this.width + 1;\n    this.height = height;\n  }\n}\n\nexport default StringRenderer;\n","import React from 'react';\n\n// inputs:\n//   str: big string with line breaks and spaces\n//   textMetadata: array of chunk metadata describing how to wrap intervals in the string\n//                 assumed to be in order by start index\n\nexport default (str, textMetadata) => {\n  let elements = [];\n\n  let lastEnd = -1; // the last index we've added to elements already\n  for (let i = 0; i < textMetadata.length; i++) {\n    let { start, end, inputData } = textMetadata[i];\n    start = Math.max(start, lastEnd + 1);\n    if (start > lastEnd + 1) elements.push(<span key={`span-prev-${i}`}>{str.substring(lastEnd + 1, start)}</span>);\n    if (inputData && inputData.props && inputData.props.href) {\n      elements.push(<a key={`a-${i}`} {...inputData.props}>{str.substring(start, end + 1)}</a>);\n    } else {\n      elements.push(<span key={`span-${i}`} {...inputData.props}>{str.substring(start, end + 1)}</span>);\n    }\n    lastEnd = end;\n  }\n  if (lastEnd < str.length) elements.push(<span key=\"span-last\">{str.substring(lastEnd + 1, str.length)}</span>);\n  return elements;\n};","const navWidth = 0;\nconst topBarHeight = 7;\nconst contentOffsets = [ navWidth + 2, topBarHeight + 2 ];\n\nconst maxPagePxWidth = 1400;\n\n// adapted from approach here: https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent\nconst isTouchScreen = !!(navigator.maxTouchPoints && navigator.maxTouchPoints > 0);\n\nexport { navWidth, topBarHeight, contentOffsets, maxPagePxWidth, isTouchScreen };","import React from 'react';\n\nimport StringRenderer from '../StringRenderer';\nimport metadataParser from '../metadataParser';\nimport { maxPagePxWidth } from '../constants';\n\nconst getWindowWidth = () => {\n  return Math.min(window.innerWidth, maxPagePxWidth);\n};\n\n\n\nclass StringRenderArea extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.singleCharRef = React.createRef();\n    this.doubleCharRef = React.createRef(); // it seems like characters blocks have some vertical padding, so use a single height char and a double-height char to figure out what that padding is\n\n    this.singleCharWidth = -1;\n    this.singleCharHeight = -1;\n    this.windowCharWidth = 40;\n    this.windowCharHeight = 40;\n    this.verticalCharPadding = 0;\n    this.resizeHandler = null;\n    this.content = '';\n    this.stringRenderer = new StringRenderer(this.windowCharWidth, this.windowCharHeight, props.data);\n  }\n\n  // when component mounts, set up resize handler and figure out pixel dims of a single character\n  // also use height of two chars in a column to find the padding around each text block\n  componentDidMount() {\n    if (this.props.autoResize) {\n      this.resizeHandler = this.resize.bind(this);\n      window.addEventListener('resize', this.resizeHandler);\n    }\n\n    const charHeight = this.singleCharRef.current.getBoundingClientRect().height;\n    const doubleCharHeight = this.doubleCharRef.current.getBoundingClientRect().height;\n    const verticalCharPadding = 2 * charHeight - doubleCharHeight; // total vertical padding around a text block\n\n    this.singleCharWidth = this.singleCharRef.current.getBoundingClientRect().width;\n    this.singleCharHeight = charHeight - verticalCharPadding;\n    this.verticalCharPadding = verticalCharPadding;\n\n    // console.log('SINGLE RENDER AREA:', this.singleCharWidth, this.singleCharHeight, this.verticalCharPadding, window.devicePixelRatio);\n\n    this.resize();\n    if (this.props.onSetCharDims) this.props.onSetCharDims(this.singleCharWidth, this.singleCharHeight, this.verticalCharPadding);\n  }\n\n  // when component is about to unmount, remove resize handler\n  componentWillUnmount() {\n    if (this.resizeHandler) {\n      window.removeEventListener('resize', this.resizeHandler);\n      this.resizeHandler = null;\n    }\n  }\n\n  // handle resizing by updating stringRenderer with new width and forcing a re-render\n  resize() {\n    this.windowCharWidth = Math.floor((this.props.fixedWidthPx || getWindowWidth()) / this.singleCharWidth);\n    this.windowCharHeight = Math.floor(((this.props.fixedHeightPx || window.innerHeight) - this.verticalCharPadding) / this.singleCharHeight);\n    this.stringRenderer.setDimensions(this.windowCharWidth, this.windowCharHeight);\n    this.forceUpdate();\n  }\n\n  // if animation data is being sent into the component (via props.newData and props.interpolationParameter),\n  // perform interpolation and return corresponding elements\n  interpolateToNewData() {\n    let { str: finalContent, textMetadata: finalTextMetadata } = this.stringRenderer.generateRenderData(this.props.newData, []);\n    let intermediateContent = this.stringRenderer.interpolateContent(this.content, finalContent, this.props.interpolationParameter);\n    return metadataParser(intermediateContent, finalTextMetadata);\n  }\n\n  // if we're animating (i.e., props.newData is set), interpolate with old page data\n  // if not, and if we've already found the width of a char, generate elements from this.props.data\n  render() {\n    let elements;\n\n    if (this.props.newData) {\n      elements = this.interpolateToNewData();\n    } else if (this.singleCharWidth > 0) {\n      this.stringRenderer.setData(this.props.data);\n      const {str, textMetadata} = this.stringRenderer.render();\n      this.content = str;\n      elements = metadataParser(str, textMetadata);\n    }\n\n    return (\n      <div className={`string-render-area ${this.props.className}`}>\n        {elements || <React.Fragment><span ref={this.singleCharRef}>{'_'}</span><br /><span ref={this.doubleCharRef}>{'_\\n_'}</span></React.Fragment>}\n        {this.props.childElementDataGenerator && this.props.childElementDataGenerator(this.singleCharWidth, this.singleCharHeight, this.verticalCharPadding)}\n      </div>\n    );\n  }\n}\n\nexport default StringRenderArea;\n","const face1 = '                          /--- //\\\\_         /\\\\\\\\/\\\\/\\\\-\\\\/\\\\-\\\\      -/\\\\M\\\\\\\\/\\\\ \\\\\\\\MM-\\\\   ///          ||\\\\|   //            \\\\\\\\|   ||/==>   <==\\\\ |||   || <a>   <a>   |/)  \\\\|      |     /|/    |    / \\\\    /||     |  _ ^-^) _   |     \\\\\\\\( ______ )/ /      \\\\  \\\\____/ / /        \\\\         /          \\\\\\\\_____//      ';\nconst face2 = '                          /--- //\\\\_         /\\\\\\\\/\\\\/\\\\-\\\\/\\\\-\\\\      -/\\\\M\\\\\\\\/\\\\ \\\\\\\\MM-\\\\   ///          ||\\\\|   //       <==  \\\\\\\\|   ||/==>      \\\\ |||   || <a>   <a>   |/)  \\\\|      |     /|/    |    / \\\\    /||     |  _ ^-^) _   |     \\\\\\\\( ______ )/ /      \\\\  \\\\____/ / /        \\\\         /          \\\\\\\\_____//      ';\nexport const FACE = [face1, face2];\n\nconst dancing1 = '                                      ||                                              _||\\\\\\\\\\\\                                           \\\\_  _\\\\                         /--- //\\\\_           \\\\  \\\\                       /\\\\\\\\/\\\\/\\\\-\\\\/\\\\-\\\\          \\\\  \\\\                     -/\\\\M\\\\\\\\/\\\\ \\\\\\\\MM-\\\\          \\\\  \\\\                  ///          ||\\\\|           \\\\  \\\\                 //            \\\\\\\\|            \\\\  \\\\                ||/==>   <==\\\\ |||             \\\\  \\\\               || <a>   <a>   |/)            /  |               \\\\|      |     /|/            /   /                |    / \\\\    /||            /   /                 |  _ ^-^) _   |           /   /                  \\\\\\\\( ______ )/ |          /___/_                   \\\\  \\\\____/ /  /         /     |                    \\\\         //|        /      /                     \\\\\\\\______// |\\\\      /      |              _______/|          / \\\\____/      /              /        \\\\         /             /              /          \\\\_______/             /              /                                |              /                                /              /                                /              /      /|    S E A T T L E       /              /______/ |                       |               |    /   |   M A R I N E R S     |               |   |    |                       |            ';\nconst dancing2 = '         ||                                            ///||_                                           /_  _/                                           /  /         /--- //\\\\_                          /  /        /\\\\\\\\/\\\\/\\\\-\\\\/\\\\-\\\\                       /  /        -/\\\\M\\\\\\\\/\\\\ \\\\\\\\MM-\\\\                     /  /       ///          ||\\\\|                    /  /        //            \\\\\\\\|                   /  /         ||/==>   <==\\\\ |||                   |  \\\\         || <a>   <a>   |/)                  \\\\   \\\\        \\\\|      |     /|/                    \\\\   \\\\        |    / \\\\    /||                      \\\\   \\\\       |  _ ^-^) _   |                      _\\\\___\\\\      \\\\\\\\( ______ )/ |                      |     \\\\      \\\\  \\\\____/ /  /                      \\\\      \\\\      \\\\         //|                       |      \\\\      \\\\\\\\______// |\\\\                       \\\\      \\\\____/|          / \\\\_______                \\\\           \\\\         /          \\\\                \\\\           \\\\_______/            \\\\                |                                \\\\                \\\\                                \\\\                \\\\                                \\\\                \\\\     S E A T T L E      |\\\\      \\\\                |                       | \\\\______\\\\               |   M A R I N E R S     |   \\\\    |               |                       |    |   |   ';\nexport const DANCING = [dancing1, dancing2];\n","import { DANCING } from '../asciiArt';\nimport { contentOffsets } from '../constants';\n\nconst [left, top] = contentOffsets;\n\nexport default () => {\n  return {\n    stringRenderData: [\n      { type: 'text', data: { start: [left, top], text: \"I'm Ben:\" }},\n      { type: 'textrect', data: { start: [left,top + 2], width: 49, text: DANCING[Math.floor(Math.random() * 2)] }}\n    ]\n  };\n};","import { contentOffsets } from '../constants';\nconst [left, top] = contentOffsets;\n\nconst projects = '\\\n';\n\nexport default () => {\n  return {\n    stringRenderData: [\n      { type: 'textrect', data: { start: [left,top], width: 40, text: projects }}\n    ]\n  };\n}","const CHAR_GRADIENT = [\n  '#',\n  'm',\n  'o',\n  '\\u2022',\n  '\\u2218',\n  '\\u00b7',\n  '.',\n  ' '\n];\n\nclass ImageConverter {\n  constructor(characterWidth = 1, characterHeight = 2, verticalCharPadding = 0) {\n    this.charWidth = characterWidth; // width of a single character\n    this.charHeight = characterHeight; // height of a single character\n    this.verticalCharPadding = verticalCharPadding; // padding around a block of text\n  }\n\n  setCharDimensions(w, h, p) {\n    this.charWidth = w;\n    this.charHeight = h;\n    this.verticalCharPadding = p;\n  }\n\n  convolveKernel(outRgba, inRgba, width, height, kernel, kernelWidth) {\n    const kernelHeight = kernel.length / kernelWidth;\n    const kernelHalfWidth = (kernelWidth - 1) / 2;\n    const kernelHalfHeight = (kernelHeight - 1) / 2;\n\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        let rsum = 0;\n        let gsum = 0;\n        let bsum = 0;\n        for (let dy = -kernelHalfHeight; dy <= kernelHalfHeight; dy++) {\n          for (let dx = -kernelHalfWidth; dx <= kernelHalfWidth; dx++) {\n            const xIdx = Math.min(width - 1, Math.max(0, x + dx));\n            const yIdx = Math.min(height - 1, Math.max(0, y + dy));\n            const offset = width * yIdx + xIdx;\n\n            const r = inRgba[4 * offset];\n            const g = inRgba[4 * offset + 1];\n            const b = inRgba[4 * offset + 2];\n\n            const kernelIdx = (dy + kernelHalfHeight) * kernelWidth + (dx + kernelHalfWidth);\n            rsum += r * kernel[kernelIdx];\n            gsum += g * kernel[kernelIdx];\n            bsum += b * kernel[kernelIdx];\n          }\n        }\n        const outOffset = width * y + x;\n        outRgba[4 * outOffset] = rsum;\n        outRgba[4 * outOffset + 1] = gsum;\n        outRgba[4 * outOffset + 2] = bsum;\n      }\n    }\n  }\n\n  forEachPixel(inRgba, width, height, fn) {\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        const idx = 4 * (width * y + x); // index into inRgba\n        const r = inRgba[idx];\n        const g = inRgba[idx + 1];\n        const b = inRgba[idx + 2];\n        const a = inRgba[idx + 3];\n        fn(r, g, b, a, idx);\n      }\n    }\n  }\n\n  invert(outRgba, inRgba, width, height) {\n    this.forEachPixel(inRgba, width, height, (r, g, b, a, idx) => {\n      outRgba[idx] = 255 - outRgba[idx];\n      outRgba[idx + 1] = 255 - outRgba[idx + 1];\n      outRgba[idx + 2] = 255 - outRgba[idx + 2];\n    });\n  }\n\n  grayscale(outRgba, imageData) {\n    this.forEachPixel(imageData.data, imageData.width, imageData.height, (r, g, b, a, idx) => {\n      const intensity = 0.2126 * r + 0.7152 * g + 0.0722 * b;\n      outRgba[idx] = intensity;\n      outRgba[idx + 1] = intensity;\n      outRgba[idx + 2] = intensity;\n      outRgba[idx + 3] = a;\n    });\n  }\n\n  edgeDetection(outRgba, imageData) {\n    const grayscaleImage = new Array(imageData.data.length);\n    this.grayscale(grayscaleImage, imageData);\n\n    const sobelHoriz = [\n      -1, 0, 1,\n      -2, 0, 2,\n      -1, 0, 1\n    ];\n    const scharrHoriz = [\n      3, 0, -3,\n      10, 0, -10,\n      3, 0, -3\n    ];\n    const horizConvolved = new Array(imageData.data.length);\n    this.convolveKernel(horizConvolved, grayscaleImage, imageData.width, imageData.height, sobelHoriz, 3);\n\n    const sobelVert = [\n      -1, -2, -1,\n      0, 0, 0,\n      1, 2, 1\n    ];\n    const scharrVert = [\n      3, 10, 3,\n      0, 0, 0,\n      -3, -10, -3\n    ];\n    const vertConvolved = new Array(imageData.data.length);\n    this.convolveKernel(vertConvolved, grayscaleImage, imageData.width, imageData.height, sobelVert, 3);\n\n    for (let i = 0; i < horizConvolved.length; i += 4) {\n      const finalIntensity = Math.sqrt(Math.pow(horizConvolved[i], 2) + Math.pow(vertConvolved[i], 2));\n      outRgba[i] = finalIntensity;\n      outRgba[i + 1] = finalIntensity;\n      outRgba[i + 2] = finalIntensity;\n      outRgba[i + 3] = imageData.data[i + 3];\n    }\n\n    this.invert(outRgba, outRgba, imageData.width, imageData.height);\n  }\n\n  getCharForVal(val) {\n    for (let i = 0; i < CHAR_GRADIENT.length; i++) {\n      const linearThresh = (i + 1) / CHAR_GRADIENT.length;\n      const thresh = Math.pow(linearThresh, 1);\n      if (val < thresh) return CHAR_GRADIENT[i];\n    }\n    return CHAR_GRADIENT[CHAR_GRADIENT.length - 1];\n  }\n\n  convert(imageData, outCharacterWidth) {\n    const aspectRatio = imageData.width / imageData.height;\n    const outCharacterHeight = Math.ceil((outCharacterWidth / aspectRatio) / (this.charHeight / this.charWidth));\n    const rgb = imageData.data;\n    const block = [];\n    const out = [];\n    const imageCharacterWidth = imageData.width / outCharacterWidth;\n    const imageCharacterHeight = imageData.height / outCharacterHeight;\n\n    for (let y = 0; y < outCharacterHeight; y++) { // for each character row\n      for (let x = 0; x < outCharacterWidth; x++) { // for each character in row\n        // find block of source image that corresponds to this character\n        const pxOffset = x * imageCharacterWidth;\n        const pyOffset = y * imageCharacterHeight;\n        let ctr = 0;\n        for (let py = pyOffset; py < pyOffset + imageCharacterHeight; py++) {\n          const roundPy = Math.round(py);\n          for (let px = pxOffset; px < pxOffset + imageCharacterWidth; px++) {\n            const roundPx = Math.round(px);\n            const pixelIndex = roundPy * imageData.width + roundPx;\n            block[ctr++] = rgb[4 * pixelIndex];\n            block[ctr++] = rgb[4 * pixelIndex + 1];\n            block[ctr++] = rgb[4 * pixelIndex + 2];\n          }\n        }\n        block.length = ctr;\n\n        const blockRgbSum = block.reduce((acc, val) => acc + val, 0);\n        const val = blockRgbSum / (255 * block.length);\n        out.push(this.getCharForVal(val));\n      }\n    }\n\n    return out;\n  }\n}\n\nexport default ImageConverter;","import React from 'react';\nimport StringRenderArea from './StringRenderArea';\nimport ImageConverter from '../ImageConverter';\n\nlet numRenders = 0;\n\nclass TV extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      singleCharWidth: 1,\n      singleCharHeight: 2,\n      verticalCharPadding: 0,\n      paused: false\n    };\n\n    this.imageConverter = new ImageConverter();\n    this.interval = null;\n    this.refreshRate = 30;\n\n    this.videoRef = React.createRef();\n    this.canvasRef = React.createRef();\n\n    this.frameData = null;\n    this.frameConfig = {};\n\n    this.setCharDims = this.setCharDims.bind(this);\n  }\n\n  componentDidMount() {\n    this.interval = setInterval(() => {\n      if (this.shouldRender()) {\n        this.forceUpdate();\n      }\n    }, 1000 / this.refreshRate);\n  }\n\n  componentWillUnmount() {\n    if (this.interval) clearInterval(this.interval);\n    this.interval = null;\n  }\n\n  getBlankScreenElements() {\n    return [ // TODO maybe we could reuse resources from frame to frame\n      { type: 'textrect', data: { start: [0,0], width: this.getCharWidthTvUnits(), text: (new Array(this.getCharWidthTvUnits() * this.getCharHeightTvUnits() + 1)).join('#') }}\n    ];\n  }\n\n\n\n  getElementsFromVideo() {\n    const video = this.videoRef.current;\n    const canvas = this.canvasRef.current;\n    const context = canvas.getContext('2d');\n\n    canvas.width = 300;\n    canvas.height = canvas.width * video.videoHeight / video.videoWidth;\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n    const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n    if (this.props.edgeModeOn === true) this.imageConverter.edgeDetection(imageData.data, imageData);\n    context.putImageData(imageData, 0, 0);\n\n    const asciiImageArray = this.imageConverter.convert(imageData, this.getCharWidthTvUnits());\n    return [\n      { type: 'textrect', data: { start: [0,0], width: this.getCharWidthTvUnits(), text: asciiImageArray.join('') } }\n    ];\n  }\n\n  getCharWidthTvUnits() {\n    return Math.floor(this.props.tvWidthPx / this.state.singleCharWidth);\n  }\n\n  getCharHeightTvUnits() {\n    return Math.floor((this.props.tvHeightPx - this.state.verticalCharPadding) / this.state.singleCharHeight);\n  }\n\n  setCharDims(singleCharWidth, singleCharHeight, verticalCharPadding) {\n    this.imageConverter.setCharDimensions(singleCharWidth, singleCharHeight, verticalCharPadding);\n    this.setState({ singleCharWidth, singleCharHeight, verticalCharPadding });\n  }\n\n  shouldRender() {\n    return true;\n  }\n\n  render() {\n    let elements;\n    // numRenders++;\n    // if (numRenders % 10 === 0) console.log('numRenders', numRenders);\n\n    if (this.props.on && this.videoRef.current && this.videoRef.current.videoHeight) {\n      if (this.state.paused) {\n        if (!this.videoRef.current.paused) this.videoRef.current.pause();\n      } else if (this.videoRef.current.paused) {\n        this.videoRef.current.play();\n      }\n      elements = this.getElementsFromVideo();\n    } else {\n      if (this.videoRef.current && !this.videoRef.current.paused) this.videoRef.current.pause();\n      elements = this.getBlankScreenElements();\n    }\n\n    return (\n      <React.Fragment>\n        <span onClick={() => this.setState({paused: !this.state.paused})}>\n          <StringRenderArea\n            data={elements}\n            fixedWidthPx={this.props.tvWidthPx}\n            fixedHeightPx={this.props.tvHeightPx}\n            onSetCharDims={this.setCharDims}\n          />\n        </span>\n\n        {/* hidden video and canvas elements from which to pull image data */}\n        <div key=\"video-helper-elt-container\" className=\"video-helper-elt-container\"><video controls width=\"300px\" ref={this.videoRef} src={this.props.src} /><canvas ref={this.canvasRef} /></div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default TV;\n","import React from 'react';\nimport TV from '../components/TV.js';\nimport { contentOffsets } from '../constants';\n\nconst [contentLeft, contentTop] = contentOffsets;\n\n\nconst tv = '\\\n__________________________________________________________________________________________\\\n|                                                                    |                   |\\\n|  ________________________________________________________________  |___________________|\\\n|  |\\\\____________________________________________________________/|  |    - QUALITY -    |\\\n|  ||                                                            ||  |      _______      |\\\n|  ||                                                            ||  |     / _____ \\\\     |\\\n|  ||                                                            ||  |    / /   //\\\\ \\\\    |\\\n|  ||                                                            ||  |   / /   //  \\\\ \\\\   |\\\n|  ||                                                            ||  |   \\\\ \\\\  //   / /   |\\\n|  ||                                                            ||  |    \\\\ \\\\_____/ /    |\\\n|  ||                                                            ||  |     \\\\_______/     |\\\n|  ||                                                            ||  |                   |\\\n|  ||                                                            ||  |    - CHANNEL -    |\\\n|  ||                                                            ||  |    DOWN     UP    |\\\n|  ||                                                            ||  |                   |\\\n|  ||                                                            ||  |    -EDGE MODE-    |\\\n|  ||                                                            ||  |    OFF      ON    |\\\n|  ||                                                            ||  |___________________|\\\n|  ||                                                            ||  | _________________ |\\\n|  ||                                                            ||  | _________________ |\\\n|  ||                                                            ||  | _________________ |\\\n|  ||                                                            ||  | _________________ |\\\n|  ||                                                            ||  | _________________ |\\\n|  ||                                                            ||  | _________________ |\\\n|  ||____________________________________________________________||  |___________________|\\\n|  |/____________________________________________________________\\\\|  |                   |\\\n|                                                                    |         ||        |\\\n|____________________________________________________________________|___________________|\\\n|  /                                                                                  \\\\  |\\\n|_/                                                                                    \\\\_|\\\n';\n\nconst CHANNELS = [\n  { src: \"/yell-ElkandCars000125MTS.mp4\", title: \"Bull elk ramming a car (NPS)\", url: \"https://www.nps.gov/media/video/view.htm?id=CEF4E37F-1DD8-B71B-0B7B5EC8C8071E13\" },\n  { src: \"/yell-BighornSheep00697MTS_original_1920x1080.mp4\", title: \"Bighorn Sheep (NPS)\", url: \"https://www.nps.gov/media/video/view.htm?id=0E023AB3-155D-451F-677AEBFA0925A047\" },\n  { src: \"/yell-GBear00452.mp4\", title: \"Grizzly Bear (early spring) (NPS)\", url: \"https://www.nps.gov/media/video/view.htm?id=DCE37092-155D-451F-67F448AC5DE819B0\" },\n  { src: \"/grca-paddleraft.mp4\", title: \"Paddle Assisted Raft in Rapid (NPS)\", url: \"https://www.nps.gov/media/video/view.htm?id=5A9F1B07-155D-451F-673B996C4F4164BA\" },\n  { src: \"/grca-trainmix.mp4\", title: \"Grand Canyon Railway Mix (NPS)\", url: \"https://www.nps.gov/grca/learn/photosmultimedia/b-roll_hd29.htm\" },\n  { src: \"/242_OceanWorlds_small.mp4\", title: \"ScienceCasts: Ocean Worlds (NASA)\", url: \"https://images.nasa.gov/details-242_OceanWorlds\"}\n  // { src: \"yell-CTTroutGOPRO104MP4.mp4\", title: \"Cutthroat Trout (NPS)\", url: \"https://www.nps.gov/media/video/view.htm?id=A9E1779E-155D-451F-678DD7B58221E1E8\" },\n  // { src: \"/jsc2017m001167_2017_Space_Station_Science_in_Pictures_MP4_small.mp4\", title: \"2017 Space Station Science in Pictures (NASA)\", url: \"https://images.nasa.gov/details-jsc2017m001167_2017_Space_Station_Science_in_Pictures_MP4\" },\n];\n\nconst wrapppedTvText = '\\\nAbout this TV page\\n\\\n----------------------\\n\\\n\\n\\\nWhy these videos?\\n\\\n\\n\\\nI was looking for some public domain videos to use here, and the National Parks Service \\\nand NASA had some fun ones!\\n \\\n';\n\nconst screenWidth = 60;\nconst screenHeight = 21;\nexport {screenWidth, screenHeight};\n\n// left and top from [0,0] of screen\nconst tvLeft = contentLeft + 6;;\nconst tvTop = contentTop + 4;\nconst tvWidth = 90;\nconst tvHeight = 30;\n\n// left and top offset of screen from top-left of tv box\nconst tvScreenLeftOffset = 5;\nconst tvScreenTopOffset = 4;\n\n// left and top offset of on/off button pair from top-left of tv\nconst tvOffLeftOffset = 74;\nconst tvOnOffTopOffset = 26;\n\n// top for channel down/up button pair (same left as above)\nconst tvChannelTopOffset = 13;\nconst downToUpText = 'DOWN     ';\nconst tvChannelUpLeftOffset = tvOffLeftOffset + downToUpText.length;\n\n// top for edge mode on/off button pair (same left as above)\nconst tvEdgeModeTopOffset = 16;\n\n// left and top offset of knobs\nconst tvKnobLeftOffset = 73;\nconst tvKnobTopOfset = 5;\n\n// left and top of now showing text\nconst tvNowShowingLeft = 5;\nconst tvNowShowingTop = 26;\n\nconst offToOnText = 'OFF      ';\nconst tvOnLeftOffset = tvOffLeftOffset + offToOnText.length;\n\nexport default ({ tvOn, setTvOn, tvChannel, setTvChannel, tvEdgeModeOn, setTvEdgeModeOn, tvDimMultiplier, setTvDimMultiplier, fontSize }) => {\n  const tvNowShowingText = !tvOn ? '' : `Channel: ${CHANNELS[tvChannel].title} (link)`;\n\n  return {\n    stringRenderData: [\n      // instruction text\n      { type: 'text', data: { start: [tvLeft,contentTop], text: 'Press \"ON\" in the bottom right to watch some Unicode TV!' }},\n      { type: 'text', data: { start: [tvLeft,contentTop + 2], text: 'Press the number buttons to change the resolution.' }},\n\n      // tv box\n      { type: 'textrect', data: { start: [tvLeft,tvTop], width: tvWidth, text: tv }},\n\n      // tv off/on\n      { type: 'text', data: { start: [tvLeft + tvOffLeftOffset, tvTop + tvOnOffTopOffset], text: 'OFF', props: { className: `clickable ${tvOn ? '' : 'selected'}`, onClick: () => setTvOn(false) } }},\n      { type: 'text', data: { start: [tvLeft + tvOnLeftOffset, tvTop + tvOnOffTopOffset], text: 'ON', props: { className: `clickable ${tvOn ? 'selected' : ''}`, onClick: () => setTvOn(true) } }},\n\n      // tv channel down/up\n      { type: 'text', data: { start: [tvLeft + tvOffLeftOffset, tvTop + tvChannelTopOffset], text: 'DOWN', props: { className: 'clickable', onClick: () => setTvChannel((tvChannel - 1 + CHANNELS.length) % CHANNELS.length) } }},\n      { type: 'text', data: { start: [tvLeft + tvChannelUpLeftOffset, tvTop + tvChannelTopOffset], text: 'UP', props: { className: 'clickable', onClick: () => setTvChannel((tvChannel + 1) % CHANNELS.length) } }},\n\n      // tv edge mode off/on\n      { type: 'text', data: { start: [tvLeft + tvOffLeftOffset, tvTop + tvEdgeModeTopOffset], text: 'OFF', props: { className: `clickable ${tvEdgeModeOn ? '' : 'selected'}`, onClick: () => setTvEdgeModeOn(false) } }},\n      { type: 'text', data: { start: [tvLeft + tvOnLeftOffset, tvTop + tvEdgeModeTopOffset], text: 'ON', props: { className: `clickable ${tvEdgeModeOn ? 'selected' : ''}`, onClick: () => setTvEdgeModeOn(true) } }},\n\n      // resolution knobs\n      { type: 'text', data: { start: [tvLeft + tvKnobLeftOffset + 9, tvTop + tvKnobTopOfset + 0], text: '1', props: { className: `clickable ${tvDimMultiplier === 1 ? 'selected' : ''}`, onClick: () => setTvDimMultiplier(1) } }},\n      { type: 'text', data: { start: [tvLeft + tvKnobLeftOffset + 11, tvTop + tvKnobTopOfset + 2], text: '2', props: { className: `clickable ${tvDimMultiplier === 2 ? 'selected' : ''}`, onClick: () => setTvDimMultiplier(2) } }},\n      { type: 'text', data: { start: [tvLeft + tvKnobLeftOffset + 10, tvTop + tvKnobTopOfset + 4], text: '3', props: { className: `clickable ${tvDimMultiplier === 3 ? 'selected' : ''}`, onClick: () => setTvDimMultiplier(3) } }},\n      { type: 'text', data: { start: [tvLeft + tvKnobLeftOffset + 2, tvTop + tvKnobTopOfset + 4], text: '4', props: { className: `clickable ${tvDimMultiplier === 4 ? 'selected' : ''}`, onClick: () => setTvDimMultiplier(4) } }},\n      { type: 'text', data: { start: [tvLeft + tvKnobLeftOffset + 1, tvTop + tvKnobTopOfset + 2], text: '5', props: { className: `clickable ${tvDimMultiplier === 5 ? 'selected' : ''}`, onClick: () => setTvDimMultiplier(5) } }},\n      { type: 'text', data: { start: [tvLeft + tvKnobLeftOffset + 3, tvTop + tvKnobTopOfset + 0], text: '6', props: { className: `clickable ${tvDimMultiplier === 6 ? 'selected' : ''}`, onClick: () => setTvDimMultiplier(6) } }},\n\n      // now showing text\n      tvOn && { type: 'text', data: { start: [tvLeft + tvNowShowingLeft, tvTop + tvNowShowingTop], text: tvNowShowingText }},\n      tvOn && { type: 'text', data: { start: [tvLeft + tvNowShowingLeft + tvNowShowingText.length - 5, tvTop + tvNowShowingTop], text: 'link', props: { href: CHANNELS[tvChannel].url }}},\n\n      // about text\n      { type: 'text', data: { start: [tvLeft, tvTop + tvHeight + 5], maxWidth: tvWidth, text: wrapppedTvText }}\n    ],\n    stringRenderChildElementDataGenerator: (singleCharWidth, singleCharHeight, verticalCharPadding) => {\n      const left = (tvLeft + tvScreenLeftOffset) * singleCharWidth;\n      const top = (tvTop + tvScreenTopOffset) * singleCharHeight + (verticalCharPadding / 2);\n      const width = screenWidth * singleCharWidth;\n      const height = screenHeight * singleCharHeight;\n      const tvFontSize = fontSize / tvDimMultiplier;\n\n      // console.log(`tv container: ${left}, ${top}, ${width}, ${top}, ${tvDimMultiplier}, ${singleCharWidth}, ${singleCharHeight}, ${verticalCharPadding}`);\n\n      return [\n        <div key=\"tv-container\" style={{left:`${left}px`, top:`${top}px`, width:`${width}px`, height:`${height}px`, position:'absolute', fontSize:`${tvFontSize}px`, lineHeight:`${tvFontSize}px`}}>\n          <TV\n            key={`tv-screen-${tvDimMultiplier}`}\n            on={tvOn}\n            edgeModeOn={tvEdgeModeOn}\n            src={CHANNELS[tvChannel].src}\n            tvWidthPx={width}\n            tvHeightPx={height}\n          />\n        </div>\n      ];\n    }\n  };\n};\n","import { contentOffsets } from '../constants';\nconst [left, top] = contentOffsets;\n\nconst introText = '\\\nIn 2014, I joined Floored, a real estate tech startup specializing in \\\nspace visualization and optimization problems, as a full-stack engineer. \\\n';\n\n// const flooredLogo = '\\\n//   ..........                     \\\n// ..............                   \\\n//   ...............                \\\n//      ...............             \\\n//         ..............           \\\n//            ..............        \\\n//               ..............     \\\n//                 ..............∘· \\\n//                    ........·•*#- \\\n//                       ..·•*####- \\\n//       ·∘               ∘#######- \\\n//       ∘##*∘·           •#######- \\\n//       ∘#####-∘         •#######- \\\n//       ∘######-·        •#####*∘. \\\n//       ∘###-•......     •##*-·    \\\n//       ∘*•·..........   •-∘       \\\n//          ............·-∘         \\\n//             ......·•*##∘         \\\n//               .·•*#####∘         \\\n//               ·########∘         \\\n//               ·########∘         \\\n//               ·########∘         \\\n//       ·•.     ·######*∘.         \\\n//       ∘###•∘  ·###-∘             \\\n//       ∘#####*•∘-∘.               \\\n//       ∘#######*                  \\\n//       ∘#######-                  \\\n//       ∘#######-                  \\\n//       ∘#######-                  \\\n//       ∘#######-                  \\\n//       ∘#######-                  \\\n//       ∘#####-•.                  \\\n//       ∘##*•·                     \\\n//       ∘-·                        \\\n// ';\n// const flooredLogoWidth = 33;\n\nconst flooredLogo = '\\\n.........          \\\n   ........        \\\n      ........     \\\n        .........  \\\n           ....∘o#∘\\\n   ·         ∘m###∘\\\n   #m∘       o####∘\\\n   ####∘     o###m·\\\n   #m•....   o#•.  \\\n   . ......·•·     \\\n       ..∘o##·     \\\n        #####·     \\\n        #####·     \\\n   m∘   ###o·      \\\n   ###o·m∘         \\\n   #####           \\\n   #####           \\\n   #####           \\\n   ####m           \\\n   ##o·            \\\n   ·               \\\n';\nconst flooredLogoWidth = 19;\n\n// const flooredLogo = '\\\n//    .                   \\\n//  ......                \\\n// ..........             \\\n//   ...........          \\\n//      ...........       \\\n//         ..........     \\\n//           .............\\\n//               .....∘o#∘\\\n//                 ·•####∘\\\n//    ·#o·         o#####∘\\\n//    ·###m•.      o#####∘\\\n//    ·####o·      o###m∘.\\\n//    ·#o∘......   om∘.   \\\n//     ...........•∘      \\\n//         ...·•m##·      \\\n//          .o#####·      \\\n//          .######·      \\\n//          .######·      \\\n//    ·#o.  .###m∘        \\\n//    ·####o∘o∘           \\\n//    ·#####m             \\\n//    ·#####m             \\\n//    ·#####m             \\\n//    ·#####m             \\\n//    ·#####∘             \\\n//    ·##o·               \\\n//    .·                  \\\n// ';\n// const flooredLogoWidth = 22;\n\nconst transitionText = '\\\nIn 2017, Floored was acquired by CBRE, and our team became CBRE Build NYC. \\\n';\n\n// const cbreBuilderHat = '\\\n//                      .·•-******-∘•-*****-·                             \\\n//                 ·∘-*********-********-****-·                           \\\n//                ·*********∘    ·*****·  ·****-∘                         \\\n//           .·∘•************-·    ·****-·  ·-****∘                       \\\n//          ∘********-•∘·.•****-.    ∘****-.  ·****-·                     \\\n//          ****•∘·         •****-·    ∘****-·  ·****-·                   \\\n//         ∘***               ∘****-·    ∘****•   ·-***.                  \\\n//        ·***∘   .··∘·         ∘-***-·    -**•     -**-                  \\\n//       ∘-*************•.        ∘-***∘            ∘****•                \\\n//      ∘**********---****-∘        •**-             *****•               \\\n//      ***-∘·.        ∘*****•.     .***∘            ∘*****.              \\\n//     •***.             ·-*****∘.   ∘***             *****•              \\\n//    ·***∘                .•*****·  .***·            -*****              \\\n//    -***                    ∘-***.  -**-            ·*****∘             \\\n//   .***∘                      ***•  ·***∘            •*****·            \\\n//  ·•***∘                      -***   ****            .*******∘          \\\n//  *****·                      .***∘  ∘***·            -*******•.        \\\n// .****   ..                    •***.  -**-      .·∘•-*****-∘*****•·     \\\n//  ·***-. •***••                .***-∘·∘***•∘•-**********-•. .∘******-∘. \\\n//   .****-******.   -•∘·.        *****************-•∘·.          ·•****∘ \\\n//    ·**********•∘·.*****•       ∘∘•--*******-∘∘·.                 .***∘ \\\n//      ··∘•-*************-∘··.           ..                        ∘***∘ \\\n//             .·∘•-****************-•∘·.                     ..··•*****· \\\n//                    .·∘•---***************-••••••••••---***********•·   \\\n//                                ..·∘•-************************--•·      \\\n//                                         .···∘∘∘∘∘∘∘∘∘··..              \\\n// ';\n// const cbreBuilderHatWidth = 71;\n\nconst cbreBuilderHat = '\\\n         ·∘∘•##•••##∘              \\\n       ∘####•· ∘•#··•#∘            \\\n    ·##•∘···•#∘  ∘••··•#∘          \\\n    ••       ·•#∘  ∘#• ·•#         \\\n   ∘#••###•·   ·•#·     ·#•·       \\\n  ∘#∘··  ·∘#•∘   #∘      •##       \\\n  #•        ·•#∘ ∘#      ·##∘      \\\n ∘#·          ∘#· #∘      •#•·     \\\n∘#•            #• •#      ∘###•    \\\n·#• ∘∘∘        ∘#∘∘#∘·∘••#••∘·∘#•∘·\\\n ·•####∘·#•∘   ·∘••#••∘··       ∘#∘\\\n     ·∘∘••##•••∘∘∘·           ··•#∘\\\n           ····∘∘∘•##•••••###•••∘  \\\n';\nconst cbreBuilderHatWidth = 35;\n\n// const cbreBuilderHat = '\\\n//                 .·.   .·                   \\\n//            .·∘•mmmm••mmmm∘                 \\\n//          ∘mmmmm•·.•mmm∘·omm∘               \\\n//      .∘•ommmoomm∘. .•mm•.·omm∘             \\\n//      omo•·.   .•mm•  .omm•.·omo∘           \\\n//     ∘mo         .•mm•  .omo  ·mm·          \\\n//    ·mmoommmm•·    .•mm.  .    •mm∘         \\\n//   .mmo•∘∘··∘mmm∘    ∘m•       .mmm∘        \\\n//   om∘        ·•mm•.  mm·       •mmm        \\\n//  ·mm           .•mm· •mo       .mmm·       \\\n//  om∘             ·mo .mm.       ommo·      \\\n// •mm·              mm· om•       ·mmmmo.    \\\n// omo .∘·.          ∘mo .mm· ··∘•ommm••mmo•· \\\n//  omoommm∘ .∘·.    .mmmmmmmmmmo•∘·..   ·•mmo\\\n//   ∘ommmmmo•mmm∘    .··∘∘•∘·.            ·mo\\\n//       .·∘•ommmmmmmoo•∘··.         ...··omm•\\\n//             .···∘∘∘•oommmmmmmmmmmmmmmmmo∘. \\\n//                        ..··∘∘∘∘∘∘··...     \\\n// ';\n// const cbreBuilderHatWidth = 43;\n\n// const cbreBuilderHat = '\\\n//                      ..     ..                       \\\n//                .·∘•mmmmo∘•mmmm•.                     \\\n//             ∘•mmmmmo•∘mmmmm••mmm•                    \\\n//          .·•mmmmmmm∘.  ·omm•. ∘mmm•.                 \\\n//        ommmmmo•∘.∘mmm•.  ·ommo. ·mmm•.               \\\n//       ·mm•∘.       •mmm∘   ∘mmm•. ∘mmm•              \\\n//       omo            ∘mmm•   ·mmm   ∘mm·             \\\n//     .•mmooommmm•.      ∘mmm.  ..     mmm•            \\\n//     ommmmmmo••mmmo·      mm•         •mmm•           \\\n//    ·mm∘.       ·ommm•.   ∘mm·        .mmmm·          \\\n//   .mmo            ∘mmmo·  mmo         ∘mmmo          \\\n//   •mm.              ·omm. •mm.         mmmm.         \\\n//   mmo                .mm• .mm•         •mmmo·        \\\n// .ommo                 omm  omm         .mmmmmo       \\\n// ·mmo  .               ·mm∘ ·mm∘     ·∘∘•mmm•mmm•·.   \\\n//  ∘mm• ommo∘            mmm•∘omm••ommmmmmo•∘  ∘ommmm• \\\n//   •mmmmmmmo  ·mo•∘     •mmmmmmmmmmo•∘·.        .∘omm.\\\n//    ·∘•ommmmmmmmmmm·..      .···.                 •mm.\\\n//          .·∘•ommmmmmmmmmmo•∘··.          ..···∘ommm• \\\n//                .·∘∘∘•••oommmmmmmooooooommmmmmmmmo∘.  \\\n//                            .·∘∘•••ooooo••∘∘∘··..     \\\n// ';\n// const cbreBuilderHatWidth = 53;\n\nconst flooredLeftOffset = Math.floor((cbreBuilderHatWidth - flooredLogoWidth) / 2); // heh\n\nconst endingText = '\\\nWorking on the Floored / CBRE Build team has been an incredible experience.\\n\\\n\\n\\\n\\n\\\nSome projects I\\'ve enjoyed:\\n\\\n\\n\\\n- building 3D scene-editing tools for our amazingly talented 3D art team\\n\\\n\\n\\\n- helping build a floorplan optimization product from the first commits through the MVP (and beyond)\\n\\\n\\n\\\n- accelerating 2D graph operations in said product\\n\\\n\\n\\\n- helping build a system for visualizing 2D floorplans in 3D\\n\\\n\\n\\\n- helping implement a faceted navigation feature using Algolia\\n\\\n\\n\\\n- spreading the word about our in-house WebGL graphics engine through documentation, tutorials, and presentations \\n\\\n\\n\\\n- contributing to a database system upgrade (CouchDB 1.x --> 2.x) and writing a blog post about it:\\\n';\n\nconst blogLink = 'https://medium.com/cbrebuild/moving-to-couchdb-2-x-c2bc606970cb'\n\nexport default () => {\n  return {\n    stringRenderData: [\n      { type: 'text', data: { start: [left,top], maxWidth: 80, rightMargin: 5, text: introText }},\n      { type: 'textrect', data: { start: [left + flooredLeftOffset,2], isYRelative: true, width: flooredLogoWidth, text: flooredLogo, props: { className: 'floored-purple' } }},\n      { type: 'text', data: { start: [left,4], isYRelative: true, maxWidth: 80, rightMargin: 5, text: transitionText }},\n      { type: 'textrect', data: { start: [left,3], isYRelative: true, width: cbreBuilderHatWidth, text: cbreBuilderHat, props: { className: 'cbre' } }},\n      { type: 'text', data: { start: [left,4], isYRelative: true, maxWidth: 80, rightMargin: 5, text: endingText }},\n      { type: 'text', data: { start: [left + 1,2], isYRelative: true, maxWidth: 80, rightMargin: 5, text: 'here', props: { href: 'https://medium.com/cbrebuild/moving-to-couchdb-2-x-c2bc606970cb' } }},\n      { type: 'text', data: { start: [left,1], isYRelative: true, maxWidth: 80, text: '\\n ' }},\n    ]\n  };\n};","import { contentOffsets, maxPagePxWidth, isTouchScreen } from '../constants';\n\nconst wrappedExplanation = `\\\nAbout this website\\n\\\n---------------------\\n\\\nThe idea for this website was to use characters as the building blocks for the page\\'s \\\ncontent -- one big string of characters that wraps at the right side of the page or after ${maxPagePxWidth}px. \\\nSome characters are wrapped in separate elements for styling and interactivity, \\\nand the \"screen\" on the TV page is its own \"character render area\", but hopefully \\\nthe site retains the spirit of the original idea. \\\n${!isTouchScreen ? '' : '\\n\\n(Try using a non-touch display to view the TV page.)'}\\n\\\n\\n\\n\\n\\n\\\nWhy??\\n\\\n---------------------\\n\\\nI think ASCII/unicode art looks neat, and it was an interesting experiment!\\n\\\n\\n\\\nI also think train station-style flip boards are fun, so I wanted to try \\\nto incorporate that type of animation into the page transitions here.\\n\\\n\\n\\\nHowever, since the page is essentially a long string interrupted by some inline elements \\\nin left-right top-down order, it is horribly inaccessible to screen readers. I would love \\\nto fix this in a future version.\\n\\\n\\n\\n\\n\\n\\\nResources\\n\\\n---------------------\\n\\\nThis site was built using React and is hosted on GitHub pages. A couple React + GitHub Pages resources I found helpful: \\\n`;\n\nconst [left, top] = contentOffsets;\n\nexport default () => {\n  return {\n    stringRenderData: [\n      { type: 'text', data: { start: [left,top], maxWidth: 80, rightMargin: 5, text: wrappedExplanation}},\n      { type: 'text', data: { start: [left + 2,2], isYRelative: true, maxWidth: 80, text: 'create-react-app', props: { href: 'https://github.com/facebook/create-react-app' } }},\n      { type: 'text', data: { start: [left + 2,1], isYRelative: true, maxWidth: 80, text: 'gh-pages', props: { href: 'https://www.npmjs.com/package/gh-pages' } }},\n      { type: 'text', data: { start: [left + 2,1], isYRelative: true, maxWidth: 80, text: 'this post', props: { href: 'https://codeburst.io/deploy-react-to-github-pages-to-create-an-amazing-website-42d8b09cd4d' } }},\n      { type: 'text', data: { start: [left,1], isYRelative: true, maxWidth: 80, text: '\\n ' }}\n    ]\n  };\n};","import home from './home';\nimport projects from './projects';\nimport tv from './tv';\nimport work from './work';\nimport about from './about';\n\nexport default {\n  home,\n  projects,\n  tv,\n  work,\n  about\n};","import { navWidth, topBarHeight, isTouchScreen } from '../constants';\n\nconst email = 'ben.leveque@gmail.com';\nconst linkedin = 'linkedin';\n\nconst navTextLeft = 3;\nconst navTextTopBetween = 3;\n\nconst getNavProps = (onClick, pageName) => {\n  return { className: 'clickable', onClick: () => onClick(pageName) };\n};\n\nexport default (onNavClick) => {\n  return [\n    // top info\n    { type: 'text', data: { start: [navWidth + 2, 1], text: 'Ben(jamin) LeVeque' }},\n    { type: 'text', data: { start: [-(email.length + 3), 3], text: email }},\n    { type: 'text', data: { start: [-(linkedin.length + 3), 4], text: linkedin, props: { href: 'https://www.linkedin.com/in/benjamin-leveque-5a534361/' } }},\n\n    // left nav\n    // { type: 'text', data: { start: [navTextLeft, topBarHeight + 1], text: 'Home', props: getNavProps(onNavClick, 'home') }},\n    // { type: 'text', data: { start: [navTextLeft, navTextTopBetween], isYRelative: true, text: 'Work', props: getNavProps(onNavClick, 'work') }},\n    // { type: 'text', data: { start: [navTextLeft, navTextTopBetween], isYRelative: true, text: 'TV', props: getNavProps(onNavClick, 'tv') }},\n    // { type: 'text', data: { start: [navTextLeft, navTextTopBetween], isYRelative: true, text: 'About', props: getNavProps(onNavClick, 'about') }},\n\n    // nav\n    { type: 'text', data: { start: ['5%', topBarHeight - 1], text: 'Home', props: getNavProps(onNavClick, 'home') }},\n    { type: 'text', data: { start: ['30%', topBarHeight - 1], text: 'Work', props: getNavProps(onNavClick, 'work') }},\n    { type: 'text', data: { start: ['55%', topBarHeight - 1], text: 'About', props: getNavProps(onNavClick, 'about') }},\n    !isTouchScreen && { type: 'text', data: { start: ['80%', topBarHeight - 1], text: 'TV', props: getNavProps(onNavClick, 'tv') }},\n\n    // lines\n    { type: 'line', data: { start: [navWidth, topBarHeight - 2], end: ['100%', topBarHeight - 2] }},\n    { type: 'line', data: { start: [navWidth, topBarHeight], end: ['100%', topBarHeight] }}\n    // { type: 'line', data: { start: [navWidth, 0], end: [navWidth, '98%'] }}\n  ];\n};","const animationHelper = ({ animationLength = 400, intervalLength = 50, onTick, onDone }) => {\n  let timeInInterval = 0;\n  let interval = setInterval(() => {\n    timeInInterval += intervalLength;\n\n    onTick(Math.min(1, timeInInterval / animationLength));\n\n    if (timeInInterval >= animationLength) {\n      clearInterval(interval);\n      onDone();\n    }\n  }, intervalLength);\n};\n\nexport default animationHelper;\n","import React, { useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport './HomePage.css';\n\nimport StringRenderArea from './StringRenderArea';\nimport pageDataGenerators from '../pageDataGenerators/index';\nimport navDataGenerator from '../pageDataGenerators/nav';\nimport animationHelper from '../animationHelper';\n\n// responsibilities:\n// - keep track of nav state\n// - gather data to pass to StringRenderArea\n\nconst SHOULD_ANIMATE = true;\nconst FONT_SIZE = 14;\n\nconst HomePage = () => {\n  const location = useLocation();\n  let pathname = location.pathname.substring(1);\n  if (!pageDataGenerators.hasOwnProperty(pathname)) pathname = 'home';\n\n  let [pageName, setPageName] = useState(pathname);\n  let [newPageData, setNewPageData] = useState(null);\n  let [interpolationParameter, setInterpolationParameter] = useState(0);\n  let [tvOn, setTvOn] = useState(false);\n  let [tvChannel, setTvChannel] = useState(0);\n  let [tvEdgeModeOn, setTvEdgeModeOn] = useState(false);\n  let [tvDimMultiplier, setTvDimMultiplier] = useState(4);\n\n  let pageSpecificState = {\n    tv: {\n      tvOn,\n      setTvOn,\n      tvChannel,\n      setTvChannel,\n      tvEdgeModeOn,\n      setTvEdgeModeOn,\n      tvDimMultiplier,\n      setTvDimMultiplier,\n      fontSize: FONT_SIZE\n    }\n  };\n\n  const switchPage = newPageName => {\n    if (!SHOULD_ANIMATE) return setPageName(newPageName);\n\n    const { stringRenderData: newStringRenderData } = pageDataGenerators[newPageName](pageSpecificState[newPageName]);\n\n    setNewPageData([ ...newStringRenderData, ...navDataGenerator(switchPage)]);\n\n    animationHelper({\n      onTick: setInterpolationParameter,\n      onDone: () => {\n        setPageName(newPageName);\n        setNewPageData(null);\n      }\n    });\n  };\n\n  const { stringRenderData, stringRenderChildElementDataGenerator } = pageDataGenerators[pageName](pageSpecificState[pageName]);\n  const navRenderData = navDataGenerator(switchPage);\n\n  return (\n    <div className=\"root\" style={{ fontSize: `${FONT_SIZE}px`, lineHeight: `${FONT_SIZE}px` }}>\n      <StringRenderArea\n        className=\"home-background\"\n        data={[...stringRenderData, ...navRenderData]}\n        childElementDataGenerator={(!newPageData && stringRenderChildElementDataGenerator)}\n        newData={newPageData}\n        interpolationParameter={interpolationParameter}\n        autoResize\n       />\n    </div>\n  );\n}\n\nexport default HomePage;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport './index.css';\nimport HomePage from './components/HomePage';\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route path=\"/\">\n          <HomePage />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}